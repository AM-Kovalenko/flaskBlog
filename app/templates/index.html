{% extends "base.html" %}
{% block title %}Список постов{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center">
  <h1>Посты</h1>
  <a class="btn btn-primary" href="{{ url_for('main.new_post') }}">Новый пост</a>
</div>
<hr>
{% for p in posts %}
  <div class="card mb-3">
    <div class="card-body">
      <h5 class="card-title"><a href="{{ url_for('main.view_post', post_id=p.id) }}">{{ p.title }}</a></h5>
      <h6 class="card-subtitle mb-2 text-muted">{{ p.author or "Аноним" }} — {{ p.created_at.strftime('%Y-%m-%d %H:%M') }}</h6>
      <p class="card-text">{{ p.body[:300] }}{% if p.body|length > 300 %}...{% endif %}</p>
      <a href="{{ url_for('main.view_post', post_id=p.id) }}" class="card-link">Читать далее</a>
    </div>
  </div>
{% else %}
  <p>Постов пока нет.</p>
{% endfor %}
{% endblock %}
